(function(e){function n(n){for(var s,a,i=n[0],o=n[1],u=n[2],f=0,d=[];f<i.length;f++)a=i[f],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);l&&l(n);while(d.length)d.shift()();return c.push.apply(c,u||[]),t()}function t(){for(var e,n=0;n<c.length;n++){for(var t=c[n],s=!0,i=1;i<t.length;i++){var o=t[i];0!==r[o]&&(s=!1)}s&&(c.splice(n--,1),e=a(a.s=t[0]))}return e}var s={},r={app:0},c=[];function a(n){if(s[n])return s[n].exports;var t=s[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=s,a.d=function(e,n,t){a.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,n){if(1&n&&(e=a(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(a.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var s in e)a.d(t,s,function(n){return e[n]}.bind(null,s));return t},a.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(n,"a",n),n},a.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},a.p="/werewolf-web-frontend/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=n,i=i.slice();for(var u=0;u<i.length;u++)n(i[u]);var l=o;c.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"152a":function(e,n,t){},1995:function(e,n,t){"use strict";t("3181")},2158:function(e,n,t){"use strict";t("5607")},"223e":function(e,n,t){},"2e52":function(e,n,t){"use strict";t("81b4")},3181:function(e,n,t){},"4d5c":function(e,n,t){"use strict";t("152a")},5454:function(e,n,t){},5607:function(e,n,t){},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var s=t("7a23"),r=t("2f62"),c={class:"container"};function a(e,n,t,r,a,i){var o=Object(s["C"])("router-view");return Object(s["u"])(),Object(s["f"])("div",c,[Object(s["i"])(o)])}var i={data:function(){return{}},setup:function(){}},o=(t("5f83"),t("d959")),u=t.n(o);const l=u()(i,[["render",a]]);var f=l,d=t("6c02"),b=(t("07ac"),{class:"main-site"}),p={class:"replace-area"};function h(e,n,t,r,c,a){var i=Object(s["C"])("SideBar"),o=Object(s["C"])("router-view"),u=Object(s["C"])("Member");return Object(s["u"])(),Object(s["f"])("div",b,[Object(s["i"])(i,{info:c.info,per:c.info.per},null,8,["info","per"]),Object(s["g"])("div",p,[Object(s["i"])(o,{per:c.info.per,messages:c.messages[c.channel_id],emitChannelId:a.getChannelId,users:c.users,onSendMsg:a.onSendMsg},null,8,["per","messages","emitChannelId","users","onSendMsg"])]),Object(s["i"])(u,{online:Object.values(c.online),offline:Object.values(c.offline)},null,8,["online","offline"])])}var g=t("2909"),m=t("5530"),O=(t("99af"),t("159b"),t("4de4"),t("d81d"),t("caad"),t("2532"),t("ac1f"),t("1276"),t("4e82"),t("b64b"),function(e){return Object(s["x"])("data-v-374d73ce"),e=e(),Object(s["v"])(),e}),j={class:"sidebar"},v={class:"title"},y=O((function(){return Object(s["g"])("p",null,"List of channels",-1)})),_={class:"backBtn"},w={class:"channels"},k={class:"category"},M={class:"expand"},C={class:"drop-down"},S=O((function(){return Object(s["g"])("p",{class:"category-name"},"Chat Room",-1)})),R={class:"hashtag"},I=O((function(){return Object(s["g"])("p",null,"Rules",-1)})),x={class:"hashtag"},U=O((function(){return Object(s["g"])("p",null,"Lobby",-1)})),E={class:"category"},$={class:"expand"},G={class:"drop-down"},B=O((function(){return Object(s["g"])("p",{class:"category-name"},"Game Room",-1)})),J={class:"channel_list"},N={class:"category-list"},P={class:"hashtag"},A={class:"info"},L={class:"img-container"},T=["src"],q=O((function(){return Object(s["g"])("div",{class:"status-circle"},null,-1)})),D={class:"user-info"},H={class:"username"},K={class:"win-lose"},F={class:"setting"};function z(e,n,t,r,c,a){var i=Object(s["C"])("fa"),o=Object(s["C"])("router-link");return Object(s["u"])(),Object(s["f"])("div",j,[Object(s["g"])("div",v,[y,Object(s["g"])("button",_,[Object(s["i"])(i,{icon:["fas","times"]})])]),Object(s["g"])("div",w,[Object(s["g"])("div",k,[Object(s["g"])("div",null,[Object(s["g"])("button",M,[Object(s["g"])("div",C,[Object(s["i"])(i,{icon:["fas","chevron-down"]})]),S])]),Object(s["g"])("div",null,[Object(s["i"])(o,{to:{name:"Chat",params:{name:"rules"}}},{default:Object(s["J"])((function(){return[Object(s["g"])("button",{class:"category-list",onClick:n[0]||(n[0]=function(){return e.active&&e.active.apply(e,arguments)})},[Object(s["g"])("div",R,[Object(s["i"])(i,{icon:["fas","hashtag"]})]),I])]})),_:1})]),Object(s["g"])("div",null,[Object(s["i"])(o,{to:{name:"Chat",params:{name:"lobby"}}},{default:Object(s["J"])((function(){return[Object(s["g"])("button",{class:"category-list",onClick:n[1]||(n[1]=function(){return e.active&&e.active.apply(e,arguments)})},[Object(s["g"])("div",x,[Object(s["i"])(i,{icon:["fas","hashtag"]})]),U])]})),_:1})])]),Object(s["g"])("div",E,[Object(s["g"])("div",null,[Object(s["g"])("button",$,[Object(s["g"])("div",G,[Object(s["i"])(i,{icon:["fas","chevron-down"]})]),B])]),Object(s["g"])("div",J,[(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["A"])(Object.keys(t.per).filter((function(e){return!["0","1"].includes(e)})).sort(),(function(e){return Object(s["u"])(),Object(s["f"])("div",{key:e},[Object(s["i"])(o,{to:{name:"Game Room",params:{id:e}}},{default:Object(s["J"])((function(){return[Object(s["g"])("button",N,[Object(s["g"])("div",P,[Object(s["i"])(i,{icon:["fas","hashtag"]})]),Object(s["g"])("p",null,Object(s["E"])(t.per[e].channel_name),1)])]})),_:2},1032,["to"])])})),128))])])]),Object(s["g"])("div",A,[Object(s["g"])("div",L,[Object(s["g"])("img",{src:t.info.avatar_url,alt:""},null,8,T),q]),Object(s["g"])("div",D,[Object(s["g"])("p",H,Object(s["E"])(t.info.username),1),Object(s["g"])("p",K,"#"+Object(s["E"])(t.info.win)+"/#"+Object(s["E"])(t.info.lose),1)]),Object(s["g"])("div",F,[Object(s["i"])(i,{icon:["fas","cog"],class:"cog-btn",onClick:a.logout},null,8,["onClick"])])])])}var V={props:{info:Object,per:Object},methods:{logout:function(){this.$cookies.remove("token"),this.$router.push({name:"LogIn"}),this.$disconnect()}}};t("2e52");const W=u()(V,[["render",z],["__scopeId","data-v-374d73ce"]]);var Y=W,Q=function(e){return Object(s["x"])("data-v-d1be7db4"),e=e(),Object(s["v"])(),e},X={class:"member"},Z={class:"users"},ee=Q((function(){return Object(s["g"])("br",null,null,-1)}));function ne(e,n,t,r,c,a){var i=Object(s["C"])("Navbar"),o=Object(s["C"])("State");return Object(s["u"])(),Object(s["f"])("div",X,[Object(s["i"])(i,{header:"Members"}),Object(s["g"])("div",Z,[Object(s["i"])(o,{title:c.online_state,users:t.online},null,8,["title","users"]),ee,Object(s["i"])(o,{title:c.offline_state,users:t.offline},null,8,["title","users"])])])}var te={class:"navbar"},se={class:"hashtag"};function re(e,n,t,r,c,a){var i=Object(s["C"])("fa");return Object(s["u"])(),Object(s["f"])("div",te,[Object(s["g"])("div",se,[Object(s["i"])(i,{icon:["fas","hashtag"]})]),Object(s["g"])("p",null,Object(s["E"])(t.header),1)])}var ce={props:{header:String}};t("d48d");const ae=u()(ce,[["render",re]]);var ie=ae,oe={class:"title"},ue=["onClick"],le={class:"img-container"},fe=["src"],de={key:0,class:"status-circle-online"},be={key:1,class:"status-circle-offline"},pe={class:"user-info"},he={class:"username"};function ge(e,n,t,r,c,a){var i=Object(s["C"])("Profile");return Object(s["u"])(),Object(s["f"])(s["a"],null,[Object(s["g"])("div",oe,Object(s["E"])(t.title)+" ãƒ¼ "+Object(s["E"])(t.users.length),1),(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["A"])(t.users,(function(e){return Object(s["u"])(),Object(s["f"])("div",{class:"user",key:e.username,onClick:function(n){return a.showInfo(e.id)}},[Object(s["g"])("div",le,[Object(s["g"])("img",{src:e.avatar_url,alt:""},null,8,fe),e.is_online?(Object(s["u"])(),Object(s["f"])("div",de)):(Object(s["u"])(),Object(s["f"])("div",be))]),Object(s["g"])("div",pe,[Object(s["g"])("p",he,Object(s["E"])(e.username),1)]),Object(s["i"])(i,{userInfo:e||{},id:e.id,class:"profile"},null,8,["userInfo","id"])],8,ue)})),128))],64)}var me=function(e){return Object(s["x"])("data-v-a2372622"),e=e(),Object(s["v"])(),e},Oe={class:"profile"},je=me((function(){return Object(s["g"])("div",{class:"banner"},null,-1)})),ve={class:"img-container"},ye=["src"],_e={key:0,class:"status-circle-online"},we={key:1,class:"status-circle-offline"},ke={class:"name-and-id"},Me={class:"name"},Ce={class:"id"},Se={class:"win-lose"},Re={class:"win"},Ie=me((function(){return Object(s["g"])("span",{style:{color:"white"}},"Win: ",-1)})),xe={class:"lose"},Ue=me((function(){return Object(s["g"])("span",{style:{color:"white"}},"Lose: ",-1)}));function Ee(e,n,t,r,c,a){return Object(s["u"])(),Object(s["f"])("div",Oe,[je,Object(s["g"])("div",ve,[Object(s["g"])("img",{src:t.userInfo.avatar_url,alt:""},null,8,ye),t.userInfo.is_online?(Object(s["u"])(),Object(s["f"])("div",_e)):(Object(s["u"])(),Object(s["f"])("div",we))]),Object(s["g"])("div",ke,[Object(s["g"])("div",Me,[Object(s["g"])("p",null,Object(s["E"])(t.userInfo.username),1)]),Object(s["g"])("div",Ce,[Object(s["g"])("p",null,"<@"+Object(s["E"])(t.userInfo.id)+">",1)])]),Object(s["g"])("div",Se,[Object(s["g"])("div",Re,[Object(s["g"])("p",null,[Ie,Object(s["h"])(Object(s["E"])(t.userInfo.win),1)])]),Object(s["g"])("div",xe,[Object(s["g"])("p",null,[Ue,Object(s["h"])(Object(s["E"])(t.userInfo.lose),1)])])])])}var $e={props:{userInfo:Object}};t("8169");const Ge=u()($e,[["render",Ee],["__scopeId","data-v-a2372622"]]);var Be=Ge,Je={components:{Profile:Be},props:{title:String,users:Array},data:function(){return{tmp:{}}},methods:{showInfo:function(e){for(var n=document.getElementsByClassName("profile"),t=0;t<n.length;++t)"block"==n[t].style.display&&n[t].id!=e&&(n[t].style.display="none");var s=document.getElementById(e);"none"==s.style.display||""==s.style.display?s.style.display="block":s.style.display="none"}}};t("777f");const Ne=u()(Je,[["render",ge],["__scopeId","data-v-54581fd1"]]);var Pe=Ne,Ae={props:{online:Array,offline:Array},data:function(){return{online_state:"online",offline_state:"offline"}},components:{Navbar:ie,State:Pe}};t("6c12");const Le=u()(Ae,[["render",ne],["__scopeId","data-v-d1be7db4"]]);var Te=Le,qe=t("1da1"),De=(t("96cf"),t("d3b7"),"https://werewolf-web-services.herokuapp.com");function He(){return Ke.apply(this,arguments)}function Ke(){return Ke=Object(qe["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://aws.random.cat/meow").then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Ke.apply(this,arguments)}function Fe(){return ze.apply(this,arguments)}function ze(){return ze=Object(qe["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://dog.ceo/api/breeds/image/random").then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),ze.apply(this,arguments)}function Ve(){return We.apply(this,arguments)}function We(){return We=Object(qe["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(Math.random()<.5)){e.next=4;break}return e.abrupt("return",He().then((function(e){return e.file})));case 4:return e.abrupt("return",Fe().then((function(e){return e.message})));case 5:case"end":return e.stop()}}),e)}))),We.apply(this,arguments)}function Ye(e,n){return Qe.apply(this,arguments)}function Qe(){return Qe=Object(qe["a"])(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(De,"/users/login"),{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,passwd:t})}).then((function(e){return e.json()})).then((function(e){var n=e.message;if("ok"==n)return e.data.token;throw n}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Qe.apply(this,arguments)}function Xe(e,n,t){return Ze.apply(this,arguments)}function Ze(){return Ze=Object(qe["a"])(regeneratorRuntime.mark((function e(n,t,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(De,"/users"),{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,passwd:t,avatar_url:s})}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Ze.apply(this,arguments)}function en(e,n){return nn.apply(this,arguments)}function nn(){return nn=Object(qe["a"])(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Ve().then((function(e){return Xe(n,t,e)})).then((function(e){if("ok"==e.message)return e.data.token;throw e.message})));case 1:case"end":return e.stop()}}),e)}))),nn.apply(this,arguments)}function tn(e){var n="; ".concat(document.cookie),t=n.split("; ".concat(e,"="));if(2===t.length)return t.pop().split(";").shift()}function sn(){return rn.apply(this,arguments)}function rn(){return rn=Object(qe["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=tn("token"),e.next=3,fetch("".concat(De,"/users"),{headers:{Authorization:n}}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),rn.apply(this,arguments)}function cn(){return an.apply(this,arguments)}function an(){return an=Object(qe["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=tn("token"),e.next=3,fetch("".concat(De,"/users/info"),{headers:{Authorization:n}}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),an.apply(this,arguments)}function on(e,n){for(var t=0;t<n.length;++t)if(n[t].id==e.id)return t;return-1}var un={login:Ye,signup:en,getAllUser:sn,getCookie:tn,getInfo:cn,containsObject:on};function ln(e,n,t){var s=e.filter((function(e){return e.id==t.user_id}));return n.username=s[0].username,n.avatar_url=s[0].avatar_url,n.message=t.message.split(/(<[@#]\d+>)/g),n.channel_id=t.channel_id,n.message_id=t.message_id,n}function fn(e,n,t){for(var s=[],r=function(r){var c=e.filter((function(e){return e.id==t[r].user_id}));n.username=c[0].username,n.avatar_url=c[0].avatar_url,n.message=t[r].message.split(/(<[@#]\d+>)/g),n.message_id=t[r].message_id,s.unshift(Object(m["a"])({},n))},c=0;c<t.length;++c)r(c);return s}var dn={receiveMessage:ln,getAllMessages:fn},bn={components:{SideBar:Y,Member:Te},data:function(){return{token:un.getCookie("token"),ws_url:"wss://werewolf-web-services.herokuapp.com",info:{per:{},username:null,avatar_url:null,id:null,win:0,lose:0,is_online:!0},users:[],messages:{},channel_id:"1",message:"",online:{},offline:{},position:0}},created:function(){var e=this;console.log("Main Created"),this.$cookies.isKey("token")||this.$router.push({name:"LogIn"}),this.token&&(console.log("Connect"),this.$connect("".concat(this.ws_url,"/ws?token=").concat(this.token)),console.log("Connected"),this.$options.sockets.onopen=function(){console.log("On open"),e.$socket.send(JSON.stringify({GetUserInfo:{}})),e.$socket.send(JSON.stringify("GetUsers")),e.$socket.send(JSON.stringify({GetPers:{}}))}),this.$options.sockets.onmessage=function(n){var t={message:e.message,username:e.info.username,avatar_url:e.info.avatar_url,message_id:""},s=JSON.parse(n.data);if(s.GetUserInfoRes)e.info=Object(m["a"])(Object(m["a"])({},e.info),s.GetUserInfoRes);else if(s.GetUsersRes)e.users=s.GetUsersRes,e.users.filter((function(e){return e.is_online})).forEach((function(n){e.online[n.id]=n})),e.users.filter((function(e){return!e.is_online})).forEach((function(n){e.offline[n.id]=n}));else if(s.UserOnline)s.UserOnline.is_online=!0,e.online[s.UserOnline.id]=s.UserOnline,delete e.offline[s.UserOnline.id],0===s.user.filter((function(e){return e.id===s.UserOnline.id})).length&&(e.users=[].concat(Object(g["a"])(e.users),[s.UserOnline]));else if(s.UserOffline)s.UserOffline.is_online=!1,e.offline[s.UserOffline.id]=s.UserOffline,delete e.online[s.UserOffline.id];else if(s.GetMsgRes){var r=!0;s.GetMsgRes.messages.length<20&&(console.log("no more:",s.GetMsgRes.channel_id),r=!1);var c=e.messages[s.GetMsgRes.channel_id]||[],a=c.map((function(e){return e.message_id})),i=dn.getAllMessages(e.users,t,s.GetMsgRes.messages).filter((function(e){return!a.includes(e.message_id)}));i=[].concat(Object(g["a"])(i),Object(g["a"])(c)),i.hasMore=r,e.messages[s.GetMsgRes.channel_id]=i}else if(s.GetPersRes){for(var o in e.info.per=s.GetPersRes,e.info.per)e.messages[o]||e.$socket.send(JSON.stringify({GetMsg:{channel_id:o,offset:0,limit:20}}));for(var u in e.messages)if(!s.GetPersRes[u]){var l=Object(m["a"])({},e.messages);delete l[u],e.messages=l}}else if(s.SendRes)t.message_id=s.SendRes.message_id,e.messages[s.SendRes.channel_id]=[].concat(Object(g["a"])(e.messages[s.SendRes.channel_id]),[t]);else if(s.BroadCastMsg){var f=e.messages[s.BroadCastMsg.channel_id]||[],d=[].concat(Object(g["a"])(f),[dn.receiveMessage(e.users,t,s.BroadCastMsg)]);d.hasMore=void 0===f.hasMore||f.hasMore,e.messages[s.BroadCastMsg.channel_id]=d}}},methods:{onSendMsg:function(e){this.message=e.split(/(<[@#]\d+>)/g)},getChannelId:function(e){this.channel_id=e}}};t("2158");const pn=u()(bn,[["render",h]]);var hn=pn,gn={class:"login-site"};function mn(e,n,t,r,c,a){var i=Object(s["C"])("SignUpForm"),o=Object(s["C"])("LoginForm");return Object(s["u"])(),Object(s["f"])("div",gn,[t.signup?(Object(s["u"])(),Object(s["d"])(i,{key:0})):Object(s["e"])("",!0),t.signup?Object(s["e"])("",!0):(Object(s["u"])(),Object(s["d"])(o,{key:1}))])}var On=function(e){return Object(s["x"])("data-v-5db3a75d"),e=e(),Object(s["v"])(),e},jn={class:"login-form"},vn=On((function(){return Object(s["g"])("label",{for:"username",class:"required"},"User Name",-1)})),yn=On((function(){return Object(s["g"])("label",{for:"passwd",class:"required"},"Password",-1)})),_n={key:0,class:"alert"},wn=On((function(){return Object(s["g"])("div",{class:"button-group"},[Object(s["g"])("button",{class:"signup-btn",type:"submit"},"Sign Up")],-1)}));function kn(e,n,t,r,c,a){return Object(s["u"])(),Object(s["f"])("div",jn,[Object(s["g"])("form",{onSubmit:n[4]||(n[4]=Object(s["L"])((function(){return a.signup&&a.signup.apply(a,arguments)}),["prevent"]))},[vn,Object(s["K"])(Object(s["g"])("input",{type:"text",name:"username",id:"username","onUpdate:modelValue":n[0]||(n[0]=function(e){return c.username=e}),onChange:n[1]||(n[1]=function(){return a.remove&&a.remove.apply(a,arguments)}),required:""},null,544),[[s["H"],c.username]]),yn,Object(s["K"])(Object(s["g"])("input",{type:"password",name:"passwd",id:"passwd","onUpdate:modelValue":n[2]||(n[2]=function(e){return c.password=e}),onChange:n[3]||(n[3]=function(){return a.remove&&a.remove.apply(a,arguments)}),required:""},null,544),[[s["H"],c.password]]),""!==c.message?(Object(s["u"])(),Object(s["f"])("div",_n,Object(s["E"])(c.message),1)):Object(s["e"])("",!0),wn],32)])}var Mn={data:function(){return{username:"",password:"",message:""}},methods:{signup:function(){var e=this;un.signup(this.username,this.password).then((function(n){n&&(e.$cookies.set("token",n,432e3),e.$router.push({name:"Chat",params:{name:"rules"}}),e.message="")})).catch((function(n){e.message=n}))},remove:function(){this.message=""}}};t("fdc7");const Cn=u()(Mn,[["render",kn],["__scopeId","data-v-5db3a75d"]]);var Sn=Cn,Rn=function(e){return Object(s["x"])("data-v-58018698"),e=e(),Object(s["v"])(),e},In={class:"login-form"},xn=Rn((function(){return Object(s["g"])("h1",null,"Welcome Back!!",-1)})),Un=Rn((function(){return Object(s["g"])("h4",null,"We're so excited to see you again!",-1)})),En=Rn((function(){return Object(s["g"])("label",{for:"username",class:"required"},"User Name",-1)})),$n=Rn((function(){return Object(s["g"])("label",{for:"passwd",class:"required"},"Password",-1)})),Gn={key:0,class:"alert"},Bn={class:"button-group"},Jn=Rn((function(){return Object(s["g"])("button",{type:"submit",class:"login-btn"}," Login ",-1)})),Nn=Rn((function(){return Object(s["g"])("div",{class:"separator"},"OR",-1)})),Pn=Rn((function(){return Object(s["g"])("button",{type:"button",class:"signup-btn"},"Sign Up",-1)}));function An(e,n,t,r,c,a){var i=Object(s["C"])("router-link");return Object(s["u"])(),Object(s["f"])("div",In,[Object(s["g"])("form",{onSubmit:n[4]||(n[4]=Object(s["L"])((function(){return a.authorize&&a.authorize.apply(a,arguments)}),["prevent"]))},[xn,Un,En,Object(s["K"])(Object(s["g"])("input",{type:"text",name:"username",id:"username","onUpdate:modelValue":n[0]||(n[0]=function(e){return c.username=e}),onChange:n[1]||(n[1]=function(){return a.remove&&a.remove.apply(a,arguments)}),required:""},null,544),[[s["H"],c.username]]),$n,Object(s["K"])(Object(s["g"])("input",{type:"password",name:"passwd",id:"passwd","onUpdate:modelValue":n[2]||(n[2]=function(e){return c.passwd=e}),onChange:n[3]||(n[3]=function(){return a.remove&&a.remove.apply(a,arguments)}),required:""},null,544),[[s["H"],c.passwd]]),""!==c.message?(Object(s["u"])(),Object(s["f"])("div",Gn,Object(s["E"])(c.message),1)):Object(s["e"])("",!0),Object(s["g"])("div",Bn,[Jn,Nn,Object(s["i"])(i,{to:{name:"SignUp"}},{default:Object(s["J"])((function(){return[Pn]})),_:1})])],32)])}var Ln={data:function(){return{username:"",passwd:"",message:""}},methods:{authorize:function(){var e=this;un.login(this.username,this.passwd).then((function(n){n&&(e.$cookies.set("token",n,432e3),e.$router.push({name:"Chat",params:{name:"rules"}}),e.message="")})).catch((function(n){e.message=n}))},remove:function(){this.message=""}}};t("4d5c");const Tn=u()(Ln,[["render",An],["__scopeId","data-v-58018698"]]);var qn=Tn,Dn={props:{signup:Boolean},components:{LoginForm:qn,SignUpForm:Sn},mounted:function(){this.$cookies.isKey("token")&&this.$router.push({name:"Chat",params:{name:"rules"}})}};t("ab9b");const Hn=u()(Dn,[["render",mn]]);var Kn=Hn,Fn=(t("466d"),{class:"chat"}),zn={class:"top-navbar"},Vn={key:2};function Wn(e,n,t,r,c,a){var i=Object(s["C"])("NavBar"),o=Object(s["C"])("DiscordMention"),u=Object(s["C"])("DiscordMessage"),l=Object(s["C"])("DiscordMessages"),f=Object(s["C"])("InputBar");return Object(s["u"])(),Object(s["f"])(s["a"],null,[Object(s["g"])("div",Fn,[Object(s["g"])("div",zn,[Object(s["i"])(i,{header:"chat-room"})]),Object(s["g"])("div",{class:"messages",id:"messages",onScrollPassive:n[0]||(n[0]=function(){return a.loadMoreMess&&a.loadMoreMess.apply(a,arguments)})},[(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["A"])(t.messages,(function(e){return Object(s["u"])(),Object(s["d"])(l,{key:e.message_id},{default:Object(s["J"])((function(){return[Object(s["i"])(u,{author:e.username,avatar:e.avatar_url},{default:Object(s["J"])((function(){return[(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["A"])(e.message,(function(e,n){return Object(s["u"])(),Object(s["f"])(s["a"],{key:n},[null!=e.match(c.r_user)?(Object(s["u"])(),Object(s["d"])(o,{key:0,highlight:!0},{default:Object(s["J"])((function(){return[Object(s["h"])(Object(s["E"])(function(){var n=e.match(c.r_user)[1],s=t.users.filter((function(e){return e.id==n}))[0];return s?s.username:"deleted user"}()),1)]})),_:2},1024)):null!=e.match(c.r_channel)?(Object(s["u"])(),Object(s["d"])(o,{key:1,type:"channel",highlight:!0,onClick:function(n){return a.to_channel(e.match(c.r_channel))}},{default:Object(s["J"])((function(){return[Object(s["h"])(Object(s["E"])(function(){var n=e.match(c.r_channel)[1],s=t.per[n];return s?s.channel_name:"personal channel"}()),1)]})),_:2},1032,["onClick"])):(Object(s["u"])(),Object(s["f"])("span",Vn,Object(s["E"])(e),1))],64)})),128))]})),_:2},1032,["author","avatar"])]})),_:2},1024)})),128))],32)]),Object(s["i"])(f,{emitSend:t.onSendMsg,per:t.per,channel_id:a.channel_id},null,8,["emitSend","per","channel_id"])],64)}t("b0c0");var Yn=t("c699"),Qn={class:"input"},Xn={class:"chat-area"},Zn=["placeholder"];function et(e,n,t,r,c,a){return Object(s["u"])(),Object(s["f"])("div",Qn,[Object(s["g"])("div",Xn,[Object(s["g"])("div",{class:Object(s["o"])(1==a.allow_check?"chat-input":"chat-input disable-cursor block-blinking"),id:"chat-input",contenteditable:"true",onKeydown:n[0]||(n[0]=function(){return a.sendMessage&&a.sendMessage.apply(a,arguments)}),placeholder:a.allow_check?"Message #"+a.channel_name:"You don't have permission to chat in this channel"},null,42,Zn)])])}var nt={props:{emitSend:Function,per:Object,channel_id:String},data:function(){return{message:""}},methods:{sendMessage:function(e){if(this.allow_check){if("Enter"==e.key&&!e.shiftKey){e.preventDefault();var n=document.getElementById("chat-input"),t=n.innerText;t&&this.$socket.send(JSON.stringify({SendReq:{channel_id:this.channel_id,message:t}})),this.emitSend(t),n.innerHTML=""}}else e.preventDefault()}},computed:{allow_check:function(){return!!this.per&&(!!this.per[this.channel_id]&&this.per[this.channel_id].sendable)},channel_name:function(){return this.per&&this.per[this.channel_id]?this.per[this.channel_id].channel_name:"personal channel"}}};t("f71b");const tt=u()(nt,[["render",et],["__scopeId","data-v-fe9e24c8"]]);var st=tt,rt={components:{DiscordMessage:Yn["b"],DiscordMessages:Yn["c"],DiscordMention:Yn["a"],NavBar:ie,InputBar:st},props:{per:Object,messages:Array,emitChannelId:Function,users:Object,onSendMsg:Function},data:function(){var e={rules:"0",lobby:"1",0:"rules",1:"lobby"};return{cids:e,r_user:/<@(\d+)>/,r_channel:/<#(\d+)>/}},methods:{loadMoreMess:function(){var e=this.messages.length,n=document.getElementById("messages");this.hasMore&&n.scrollTop<=100&&(console.log("get more",this.channel_id),this.$socket.send(JSON.stringify({GetMsg:{channel_id:this.channel_id,offset:e,limit:20}})))},to_channel:function(e){var n=this,t=Object.keys(this.per).filter((function(e){return"personal channel"===n.per[e].channel_name}))[0],s=e[1]||"1",r=this.per[s]?s:t||"1",c="1"!==r&&"0"!=r?{name:"Game Room",params:{id:r}}:{name:"Chat",params:{name:this.cids[r]}};this.$router.push(c)}},mounted:function(){console.log("Chat Mounted"),this.emitChannelId(this.channel_id);var e=document.getElementById("messages");setTimeout((function(){e.scrollTop=e.scrollHeight}),0)},watch:{per:{handler:function(e){e[this.channel_id]||this.$router.push({name:"Chat",params:{name:"lobby"}})},deep:!0},messages:{handler:function(e){var n=document.getElementById("messages");e&&n.scrollHeight-n.scrollTop<=n.clientHeight+100&&setTimeout((function(){n.scrollTop=n.scrollHeight}),0)},deep:!0},$route:function(e){var n=this.cids[e.params.name]||e.params.id||"0";this.emitChannelId(n)}},computed:{channel_id:function(){return this.cids[this.$route.params.name]||this.$route.params.id||"0"},hasMore:function(){return this.messages.hasMore}}};t("1995");const ct=u()(rt,[["render",Wn],["__scopeId","data-v-1ef31d1c"]]);var at=ct,it=[{path:"/",name:"MainSite",component:hn,children:[{path:"rooms/:name",name:"Chat",component:at},{path:"games/:id",name:"Game Room",component:at}]},{path:"/login",name:"LogIn",component:Kn,props:{signup:!1}},{path:"/signup",name:"SignUp",component:Kn,props:{signup:!0}},{path:"/:pathMatch(.*)*",redirect:"/rooms/rules"}],ot=Object(d["a"])({history:Object(d["b"])("/werewolf-web-frontend/"),routes:it}),ut=ot,lt=t("ecee"),ft=t("c074"),dt=t("ad3d"),bt=t("df85"),pt=t("a20e"),ht=t.n(pt),gt=(t("2903"),t("ed18")),mt=t.n(gt);mt.a.config();var Ot=un.getCookie("token");lt["c"].add(ft["a"]),Object(s["c"])(f).use(ut).use(r["a"]).use(bt["a"]).use(Yn["d"]).use(ht.a,"wss://werewolf-web-services.herokuapp.com/ws?token=".concat(Ot),{reconnection:!0,reconnectionAttempts:100,reconnectionDelay:300,connectManually:!0}).component("fa",dt["a"]).mount("#app")},"5f83":function(e,n,t){"use strict";t("223e")},"656b":function(e,n,t){},"65a1":function(e,n,t){},"6c12":function(e,n,t){"use strict";t("7135")},"6e79":function(e,n,t){},7135:function(e,n,t){},"777f":function(e,n,t){"use strict";t("65a1")},8169:function(e,n,t){"use strict";t("e416")},"81b4":function(e,n,t){},ab9b:function(e,n,t){"use strict";t("656b")},d48d:function(e,n,t){"use strict";t("5454")},e199:function(e,n,t){},e416:function(e,n,t){},f71b:function(e,n,t){"use strict";t("e199")},fdc7:function(e,n,t){"use strict";t("6e79")}});
//# sourceMappingURL=app.1aabbff2.js.map