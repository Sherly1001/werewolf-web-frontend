(function(e){function n(n){for(var s,c,o=n[0],i=n[1],u=n[2],d=0,f=[];d<o.length;d++)c=o[d],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&f.push(r[c][0]),r[c]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s]);l&&l(n);while(f.length)f.shift()();return a.push.apply(a,u||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],s=!0,o=1;o<t.length;o++){var i=t[o];0!==r[i]&&(s=!1)}s&&(a.splice(n--,1),e=c(c.s=t[0]))}return e}var s={},r={app:0},a=[];function c(n){if(s[n])return s[n].exports;var t=s[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.m=e,c.c=s,c.d=function(e,n,t){c.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,n){if(1&n&&(e=c(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var s in e)c.d(t,s,function(n){return e[n]}.bind(null,s));return t},c.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(n,"a",n),n},c.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},c.p="/werewolf-web-frontend/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],i=o.push.bind(o);o.push=n,o=o.slice();for(var u=0;u<o.length;u++)n(o[u]);var l=i;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"152a":function(e,n,t){},"223e":function(e,n,t){},"2e52":function(e,n,t){"use strict";t("81b4")},"4d5c":function(e,n,t){"use strict";t("152a")},5454:function(e,n,t){},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var s=t("7a23"),r=t("2f62"),a={class:"container"};function c(e,n,t,r,c,o){var i=Object(s["C"])("router-view");return Object(s["u"])(),Object(s["f"])("div",a,[Object(s["i"])(i)])}var o={data:function(){return{}},setup:function(){}},i=(t("5f83"),t("d959")),u=t.n(i);const l=u()(o,[["render",c]]);var d=l,f=t("6c02"),b=(t("07ac"),{class:"main-site"}),h={class:"replace-area"};function p(e,n,t,r,a,c){var o=Object(s["C"])("SideBar"),i=Object(s["C"])("router-view"),u=Object(s["C"])("Member");return Object(s["u"])(),Object(s["f"])("div",b,[Object(s["i"])(o,{info:a.info,per:a.info.per},null,8,["info","per"]),Object(s["g"])("div",h,[Object(s["i"])(i,{per:a.info.per,messages:a.messages[a.channel_id]||[],hasMore:a.hasMore[a.channel_id]||{},onLoadMore:c.onLoadMore,onScroll:c.onScroll,emitChannelId:c.getChannelId,users:a.users,onSendMsg:c.onSendMsg},null,8,["per","messages","hasMore","onLoadMore","onScroll","emitChannelId","users","onSendMsg"])]),Object(s["i"])(u,{online:Object.values(a.online),offline:Object.values(a.offline)},null,8,["online","offline"])])}var g=t("ade3"),O=t("2909"),m=t("5530"),j=(t("99af"),t("159b"),t("4de4"),t("d81d"),t("caad"),t("2532"),t("ac1f"),t("1276"),t("4e82"),t("b64b"),function(e){return Object(s["x"])("data-v-374d73ce"),e=e(),Object(s["v"])(),e}),v={class:"sidebar"},_={class:"title"},y=j((function(){return Object(s["g"])("p",null,"List of channels",-1)})),w={class:"backBtn"},M={class:"channels"},k={class:"category"},C={class:"expand"},S={class:"drop-down"},R=j((function(){return Object(s["g"])("p",{class:"category-name"},"Chat Room",-1)})),I={class:"hashtag"},x=j((function(){return Object(s["g"])("p",null,"Rules",-1)})),U={class:"hashtag"},$=j((function(){return Object(s["g"])("p",null,"Lobby",-1)})),E={class:"category"},G={class:"expand"},L={class:"drop-down"},B=j((function(){return Object(s["g"])("p",{class:"category-name"},"Game Room",-1)})),J={class:"channel_list"},T={class:"category-list"},N={class:"hashtag"},P={class:"info"},A={class:"img-container"},H=["src"],D=j((function(){return Object(s["g"])("div",{class:"status-circle"},null,-1)})),F={class:"user-info"},q={class:"username"},K={class:"win-lose"},z={class:"setting"};function V(e,n,t,r,a,c){var o=Object(s["C"])("fa"),i=Object(s["C"])("router-link");return Object(s["u"])(),Object(s["f"])("div",v,[Object(s["g"])("div",_,[y,Object(s["g"])("button",w,[Object(s["i"])(o,{icon:["fas","times"]})])]),Object(s["g"])("div",M,[Object(s["g"])("div",k,[Object(s["g"])("div",null,[Object(s["g"])("button",C,[Object(s["g"])("div",S,[Object(s["i"])(o,{icon:["fas","chevron-down"]})]),R])]),Object(s["g"])("div",null,[Object(s["i"])(i,{to:{name:"Chat",params:{name:"rules"}}},{default:Object(s["J"])((function(){return[Object(s["g"])("button",{class:"category-list",onClick:n[0]||(n[0]=function(){return e.active&&e.active.apply(e,arguments)})},[Object(s["g"])("div",I,[Object(s["i"])(o,{icon:["fas","hashtag"]})]),x])]})),_:1})]),Object(s["g"])("div",null,[Object(s["i"])(i,{to:{name:"Chat",params:{name:"lobby"}}},{default:Object(s["J"])((function(){return[Object(s["g"])("button",{class:"category-list",onClick:n[1]||(n[1]=function(){return e.active&&e.active.apply(e,arguments)})},[Object(s["g"])("div",U,[Object(s["i"])(o,{icon:["fas","hashtag"]})]),$])]})),_:1})])]),Object(s["g"])("div",E,[Object(s["g"])("div",null,[Object(s["g"])("button",G,[Object(s["g"])("div",L,[Object(s["i"])(o,{icon:["fas","chevron-down"]})]),B])]),Object(s["g"])("div",J,[(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["A"])(Object.keys(t.per).filter((function(e){return!["0","1"].includes(e)})).sort(),(function(e){return Object(s["u"])(),Object(s["f"])("div",{key:e},[Object(s["i"])(i,{to:{name:"Game Room",params:{id:e}}},{default:Object(s["J"])((function(){return[Object(s["g"])("button",T,[Object(s["g"])("div",N,[Object(s["i"])(o,{icon:["fas","hashtag"]})]),Object(s["g"])("p",null,Object(s["E"])(t.per[e].channel_name),1)])]})),_:2},1032,["to"])])})),128))])])]),Object(s["g"])("div",P,[Object(s["g"])("div",A,[Object(s["g"])("img",{src:t.info.avatar_url,alt:""},null,8,H),D]),Object(s["g"])("div",F,[Object(s["g"])("p",q,Object(s["E"])(t.info.username),1),Object(s["g"])("p",K,"#"+Object(s["E"])(t.info.win)+"/#"+Object(s["E"])(t.info.lose),1)]),Object(s["g"])("div",z,[Object(s["i"])(o,{icon:["fas","cog"],class:"cog-btn",onClick:c.logout},null,8,["onClick"])])])])}var W={props:{info:Object,per:Object},methods:{logout:function(){this.$cookies.remove("token"),this.$router.push({name:"LogIn"}),this.$disconnect()}}};t("2e52");const Y=u()(W,[["render",V],["__scopeId","data-v-374d73ce"]]);var Q=Y,X=function(e){return Object(s["x"])("data-v-d1be7db4"),e=e(),Object(s["v"])(),e},Z={class:"member"},ee={class:"users"},ne=X((function(){return Object(s["g"])("br",null,null,-1)}));function te(e,n,t,r,a,c){var o=Object(s["C"])("Navbar"),i=Object(s["C"])("State");return Object(s["u"])(),Object(s["f"])("div",Z,[Object(s["i"])(o,{header:"Members"}),Object(s["g"])("div",ee,[Object(s["i"])(i,{title:a.online_state,users:t.online},null,8,["title","users"]),ne,Object(s["i"])(i,{title:a.offline_state,users:t.offline},null,8,["title","users"])])])}var se={class:"navbar"},re={class:"hashtag"};function ae(e,n,t,r,a,c){var o=Object(s["C"])("fa");return Object(s["u"])(),Object(s["f"])("div",se,[Object(s["g"])("div",re,[Object(s["i"])(o,{icon:["fas","hashtag"]})]),Object(s["g"])("p",null,Object(s["E"])(t.header),1)])}var ce={props:{header:String}};t("d48d");const oe=u()(ce,[["render",ae]]);var ie=oe,ue={class:"title"},le=["onClick"],de={class:"img-container"},fe=["src"],be={key:0,class:"status-circle-online"},he={key:1,class:"status-circle-offline"},pe={class:"user-info"},ge={class:"username"};function Oe(e,n,t,r,a,c){var o=Object(s["C"])("Profile");return Object(s["u"])(),Object(s["f"])(s["a"],null,[Object(s["g"])("div",ue,Object(s["E"])(t.title)+" ãƒ¼ "+Object(s["E"])(t.users.length),1),(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["A"])(t.users,(function(e){return Object(s["u"])(),Object(s["f"])("div",{class:"user",key:e.username,onClick:function(n){return c.showInfo(e.id)}},[Object(s["g"])("div",de,[Object(s["g"])("img",{src:e.avatar_url,alt:""},null,8,fe),e.is_online?(Object(s["u"])(),Object(s["f"])("div",be)):(Object(s["u"])(),Object(s["f"])("div",he))]),Object(s["g"])("div",pe,[Object(s["g"])("p",ge,Object(s["E"])(e.username),1)]),Object(s["i"])(o,{userInfo:e||{},id:e.id,class:"profile"},null,8,["userInfo","id"])],8,le)})),128))],64)}var me=function(e){return Object(s["x"])("data-v-a2372622"),e=e(),Object(s["v"])(),e},je={class:"profile"},ve=me((function(){return Object(s["g"])("div",{class:"banner"},null,-1)})),_e={class:"img-container"},ye=["src"],we={key:0,class:"status-circle-online"},Me={key:1,class:"status-circle-offline"},ke={class:"name-and-id"},Ce={class:"name"},Se={class:"id"},Re={class:"win-lose"},Ie={class:"win"},xe=me((function(){return Object(s["g"])("span",{style:{color:"white"}},"Win: ",-1)})),Ue={class:"lose"},$e=me((function(){return Object(s["g"])("span",{style:{color:"white"}},"Lose: ",-1)}));function Ee(e,n,t,r,a,c){return Object(s["u"])(),Object(s["f"])("div",je,[ve,Object(s["g"])("div",_e,[Object(s["g"])("img",{src:t.userInfo.avatar_url,alt:""},null,8,ye),t.userInfo.is_online?(Object(s["u"])(),Object(s["f"])("div",we)):(Object(s["u"])(),Object(s["f"])("div",Me))]),Object(s["g"])("div",ke,[Object(s["g"])("div",Ce,[Object(s["g"])("p",null,Object(s["E"])(t.userInfo.username),1)]),Object(s["g"])("div",Se,[Object(s["g"])("p",null,"<@"+Object(s["E"])(t.userInfo.id)+">",1)])]),Object(s["g"])("div",Re,[Object(s["g"])("div",Ie,[Object(s["g"])("p",null,[xe,Object(s["h"])(Object(s["E"])(t.userInfo.win),1)])]),Object(s["g"])("div",Ue,[Object(s["g"])("p",null,[$e,Object(s["h"])(Object(s["E"])(t.userInfo.lose),1)])])])])}var Ge={props:{userInfo:Object}};t("8169");const Le=u()(Ge,[["render",Ee],["__scopeId","data-v-a2372622"]]);var Be=Le,Je={components:{Profile:Be},props:{title:String,users:Array},data:function(){return{tmp:{}}},methods:{showInfo:function(e){for(var n=document.getElementsByClassName("profile"),t=0;t<n.length;++t)"block"==n[t].style.display&&n[t].id!=e&&(n[t].style.display="none");var s=document.getElementById(e);"none"==s.style.display||""==s.style.display?s.style.display="block":s.style.display="none"}}};t("777f");const Te=u()(Je,[["render",Oe],["__scopeId","data-v-54581fd1"]]);var Ne=Te,Pe={props:{online:Array,offline:Array},data:function(){return{online_state:"online",offline_state:"offline"}},components:{Navbar:ie,State:Ne}};t("6c12");const Ae=u()(Pe,[["render",te],["__scopeId","data-v-d1be7db4"]]);var He=Ae,De=t("1da1"),Fe=(t("96cf"),t("d3b7"),"https://werewolf-web-services.herokuapp.com");function qe(){return Ke.apply(this,arguments)}function Ke(){return Ke=Object(De["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://aws.random.cat/meow").then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Ke.apply(this,arguments)}function ze(){return Ve.apply(this,arguments)}function Ve(){return Ve=Object(De["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://dog.ceo/api/breeds/image/random").then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Ve.apply(this,arguments)}function We(){return Ye.apply(this,arguments)}function Ye(){return Ye=Object(De["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(Math.random()<.5)){e.next=4;break}return e.abrupt("return",qe().then((function(e){return e.file})));case 4:return e.abrupt("return",ze().then((function(e){return e.message})));case 5:case"end":return e.stop()}}),e)}))),Ye.apply(this,arguments)}function Qe(e,n){return Xe.apply(this,arguments)}function Xe(){return Xe=Object(De["a"])(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Fe,"/users/login"),{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,passwd:t})}).then((function(e){return e.json()})).then((function(e){var n=e.message;if("ok"==n)return e.data.token;throw n}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Xe.apply(this,arguments)}function Ze(e,n,t){return en.apply(this,arguments)}function en(){return en=Object(De["a"])(regeneratorRuntime.mark((function e(n,t,s){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Fe,"/users"),{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,passwd:t,avatar_url:s})}).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),en.apply(this,arguments)}function nn(e,n){return tn.apply(this,arguments)}function tn(){return tn=Object(De["a"])(regeneratorRuntime.mark((function e(n,t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",We().then((function(e){return Ze(n,t,e)})).then((function(e){if("ok"==e.message)return e.data.token;throw e.message})));case 1:case"end":return e.stop()}}),e)}))),tn.apply(this,arguments)}function sn(e){var n="; ".concat(document.cookie),t=n.split("; ".concat(e,"="));if(2===t.length)return t.pop().split(";").shift()}function rn(){return an.apply(this,arguments)}function an(){return an=Object(De["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=sn("token"),e.next=3,fetch("".concat(Fe,"/users"),{headers:{Authorization:n}}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),an.apply(this,arguments)}function cn(){return on.apply(this,arguments)}function on(){return on=Object(De["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=sn("token"),e.next=3,fetch("".concat(Fe,"/users/info"),{headers:{Authorization:n}}).then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),on.apply(this,arguments)}function un(e,n){for(var t=0;t<n.length;++t)if(n[t].id==e.id)return t;return-1}var ln={login:Qe,signup:nn,getAllUser:rn,getCookie:sn,getInfo:cn,containsObject:un};function dn(e,n,t){var s=e.filter((function(e){return e.id==t.user_id}));return n.username=s[0].username,n.avatar_url=s[0].avatar_url,n.message=t.message.split(/(<[@#]\d+>)/g),n.channel_id=t.channel_id,n.message_id=t.message_id,n}function fn(e,n,t){for(var s=[],r=function(r){var a=e.filter((function(e){return e.id==t[r].user_id}));n.username=a[0].username,n.avatar_url=a[0].avatar_url,n.message=t[r].message.split(/(<[@#]\d+>)/g),n.message_id=t[r].message_id,s.unshift(Object(m["a"])({},n))},a=0;a<t.length;++a)r(a);return s}var bn={receiveMessage:dn,getAllMessages:fn},hn={components:{SideBar:Q,Member:He},data:function(){return{token:ln.getCookie("token"),ws_url:"wss://werewolf-web-services.herokuapp.com",info:{per:{},username:null,avatar_url:null,id:null,win:0,lose:0,is_online:!0},users:[],messages:{},hasMore:{},channel_id:"1",message:"",online:{},offline:{},position:0}},created:function(){var e=this;console.log("Main Created"),this.$cookies.isKey("token")||this.$router.push({name:"LogIn"}),this.token&&(console.log("Connect"),this.$connect("".concat(this.ws_url,"/ws?token=").concat(this.token)),console.log("Connected"),this.$options.sockets.onopen=function(){console.log("On open"),e.$socket.send(JSON.stringify({GetUserInfo:{}})),e.$socket.send(JSON.stringify("GetUsers")),e.$socket.send(JSON.stringify({GetPers:{}}))}),this.$options.sockets.onmessage=function(n){var t={message:e.message,username:e.info.username,avatar_url:e.info.avatar_url,message_id:""},s=JSON.parse(n.data);if(s.GetUserInfoRes)e.info=Object(m["a"])(Object(m["a"])({},e.info),s.GetUserInfoRes);else if(s.GetUsersRes)e.users=s.GetUsersRes,e.users.filter((function(e){return e.is_online})).forEach((function(n){e.online[n.id]=n})),e.users.filter((function(e){return!e.is_online})).forEach((function(n){e.offline[n.id]=n}));else if(s.UserOnline)s.UserOnline.is_online=!0,e.online[s.UserOnline.id]=s.UserOnline,delete e.offline[s.UserOnline.id],0===e.users.filter((function(e){return e.id===s.UserOnline.id})).length&&(e.users=[].concat(Object(O["a"])(e.users),[s.UserOnline]));else if(s.UserOffline)s.UserOffline.is_online=!1,e.offline[s.UserOffline.id]=s.UserOffline,delete e.online[s.UserOffline.id];else if(s.GetMsgRes){var r=!0;s.GetMsgRes.messages.length<20&&(console.log("no more:",s.GetMsgRes.channel_id),r=!1),e.hasMore=Object.assign({},e.hasMore,Object(g["a"])({},s.GetMsgRes.channel_id,Object.assign({},e.hasMore[s.GetMsgRes.channel_id],{hasMore:r,lastFetchMoreDone:!0})));var a=e.messages[s.GetMsgRes.channel_id]||[],c=a.map((function(e){return e.message_id})),o=bn.getAllMessages(e.users,t,s.GetMsgRes.messages).filter((function(e){return!c.includes(e.message_id)}));o=[].concat(Object(O["a"])(o),Object(O["a"])(a)),e.messages=Object.assign({},e.messages,Object(g["a"])({},s.GetMsgRes.channel_id,o))}else if(s.GetPersRes){for(var i in e.info.per=s.GetPersRes,e.info.per)e.messages[i]||e.$socket.send(JSON.stringify({GetMsg:{channel_id:i,offset:0,limit:20}})),e.hasMore=Object.assign({},e.hasMore,Object(g["a"])({},i,Object.assign({},e.hasMore[i],{hasMore:!0,lastFetchMoreDone:!0})));for(var u in e.messages)if(!s.GetPersRes[u]){var l=Object(m["a"])({},e.messages),d=Object(m["a"])({},e.hasMore);delete l[u],delete d[u],e.messages=l,e.hasMore=d}}else if(s.SendRes)t.message_id=s.SendRes.message_id,e.messages=Object.assign({},e.messages,Object(g["a"])({},s.SendRes.channel_id,[].concat(Object(O["a"])(e.messages[s.SendRes.channel_id]||[]),[t])));else if(s.BroadCastMsg){var f=e.messages[s.BroadCastMsg.channel_id]||[];f=f.filter((function(e){return e.message_id!=s.BroadCastMsg.message_id}));var b=[].concat(Object(O["a"])(f),[bn.receiveMessage(e.users,t,s.BroadCastMsg)]);e.messages=Object.assign({},e.messages,Object(g["a"])({},s.BroadCastMsg.channel_id,b))}else s.Error&&null==e.info.username&&(e.$cookies.remove("token"),e.$router.push({name:"LogIn"}),e.$disconnect())}},methods:{onSendMsg:function(e){this.message=e.split(/(<[@#]\d+>)/g)},getChannelId:function(e){this.channel_id=e},onLoadMore:function(e,n){this.$socket.send(JSON.stringify({GetMsg:{channel_id:this.channel_id,offset:n,limit:20}})),this.hasMore=Object.assign({},this.hasMore,Object(g["a"])({},e,Object.assign({},this.hasMore[e],{lastFetchMoreDone:!1})))},onScroll:function(e,n,t){this.hasMore=Object.assign({},this.hasMore,Object(g["a"])({},e,Object.assign({},this.hasMore[e],{scrollTop:n,scrollHeight:t})))}}};t("c0bb");const pn=u()(hn,[["render",p]]);var gn=pn,On={class:"login-site"};function mn(e,n,t,r,a,c){var o=Object(s["C"])("SignUpForm"),i=Object(s["C"])("LoginForm");return Object(s["u"])(),Object(s["f"])("div",On,[t.signup?(Object(s["u"])(),Object(s["d"])(o,{key:0})):Object(s["e"])("",!0),t.signup?Object(s["e"])("",!0):(Object(s["u"])(),Object(s["d"])(i,{key:1}))])}var jn=function(e){return Object(s["x"])("data-v-5db3a75d"),e=e(),Object(s["v"])(),e},vn={class:"login-form"},_n=jn((function(){return Object(s["g"])("label",{for:"username",class:"required"},"User Name",-1)})),yn=jn((function(){return Object(s["g"])("label",{for:"passwd",class:"required"},"Password",-1)})),wn={key:0,class:"alert"},Mn=jn((function(){return Object(s["g"])("div",{class:"button-group"},[Object(s["g"])("button",{class:"signup-btn",type:"submit"},"Sign Up")],-1)}));function kn(e,n,t,r,a,c){return Object(s["u"])(),Object(s["f"])("div",vn,[Object(s["g"])("form",{onSubmit:n[4]||(n[4]=Object(s["L"])((function(){return c.signup&&c.signup.apply(c,arguments)}),["prevent"]))},[_n,Object(s["K"])(Object(s["g"])("input",{type:"text",name:"username",id:"username","onUpdate:modelValue":n[0]||(n[0]=function(e){return a.username=e}),onChange:n[1]||(n[1]=function(){return c.remove&&c.remove.apply(c,arguments)}),required:""},null,544),[[s["H"],a.username]]),yn,Object(s["K"])(Object(s["g"])("input",{type:"password",name:"passwd",id:"passwd","onUpdate:modelValue":n[2]||(n[2]=function(e){return a.password=e}),onChange:n[3]||(n[3]=function(){return c.remove&&c.remove.apply(c,arguments)}),required:""},null,544),[[s["H"],a.password]]),""!==a.message?(Object(s["u"])(),Object(s["f"])("div",wn,Object(s["E"])(a.message),1)):Object(s["e"])("",!0),Mn],32)])}var Cn={data:function(){return{username:"",password:"",message:""}},methods:{signup:function(){var e=this;ln.signup(this.username,this.password).then((function(n){n&&(e.$cookies.set("token",n,432e3),e.$router.push({name:"Chat",params:{name:"rules"}}),e.message="")})).catch((function(n){e.message=n}))},remove:function(){this.message=""}}};t("fdc7");const Sn=u()(Cn,[["render",kn],["__scopeId","data-v-5db3a75d"]]);var Rn=Sn,In=function(e){return Object(s["x"])("data-v-58018698"),e=e(),Object(s["v"])(),e},xn={class:"login-form"},Un=In((function(){return Object(s["g"])("h1",null,"Welcome Back!!",-1)})),$n=In((function(){return Object(s["g"])("h4",null,"We're so excited to see you again!",-1)})),En=In((function(){return Object(s["g"])("label",{for:"username",class:"required"},"User Name",-1)})),Gn=In((function(){return Object(s["g"])("label",{for:"passwd",class:"required"},"Password",-1)})),Ln={key:0,class:"alert"},Bn={class:"button-group"},Jn=In((function(){return Object(s["g"])("button",{type:"submit",class:"login-btn"}," Login ",-1)})),Tn=In((function(){return Object(s["g"])("div",{class:"separator"},"OR",-1)})),Nn=In((function(){return Object(s["g"])("button",{type:"button",class:"signup-btn"},"Sign Up",-1)}));function Pn(e,n,t,r,a,c){var o=Object(s["C"])("router-link");return Object(s["u"])(),Object(s["f"])("div",xn,[Object(s["g"])("form",{onSubmit:n[4]||(n[4]=Object(s["L"])((function(){return c.authorize&&c.authorize.apply(c,arguments)}),["prevent"]))},[Un,$n,En,Object(s["K"])(Object(s["g"])("input",{type:"text",name:"username",id:"username","onUpdate:modelValue":n[0]||(n[0]=function(e){return a.username=e}),onChange:n[1]||(n[1]=function(){return c.remove&&c.remove.apply(c,arguments)}),required:""},null,544),[[s["H"],a.username]]),Gn,Object(s["K"])(Object(s["g"])("input",{type:"password",name:"passwd",id:"passwd","onUpdate:modelValue":n[2]||(n[2]=function(e){return a.passwd=e}),onChange:n[3]||(n[3]=function(){return c.remove&&c.remove.apply(c,arguments)}),required:""},null,544),[[s["H"],a.passwd]]),""!==a.message?(Object(s["u"])(),Object(s["f"])("div",Ln,Object(s["E"])(a.message),1)):Object(s["e"])("",!0),Object(s["g"])("div",Bn,[Jn,Tn,Object(s["i"])(o,{to:{name:"SignUp"}},{default:Object(s["J"])((function(){return[Nn]})),_:1})])],32)])}var An={data:function(){return{username:"",passwd:"",message:""}},methods:{authorize:function(){var e=this;ln.login(this.username,this.passwd).then((function(n){n&&(e.$cookies.set("token",n,432e3),e.$router.push({name:"Chat",params:{name:"rules"}}),e.message="")})).catch((function(n){e.message=n}))},remove:function(){this.message=""}}};t("4d5c");const Hn=u()(An,[["render",Pn],["__scopeId","data-v-58018698"]]);var Dn=Hn,Fn={props:{signup:Boolean},components:{LoginForm:Dn,SignUpForm:Rn},mounted:function(){this.$cookies.isKey("token")&&this.$router.push({name:"Chat",params:{name:"rules"}})}};t("ab9b");const qn=u()(Fn,[["render",mn]]);var Kn=qn,zn=(t("466d"),{class:"chat"}),Vn={class:"top-navbar"},Wn={key:2};function Yn(e,n,t,r,a,c){var o=Object(s["C"])("NavBar"),i=Object(s["C"])("DiscordMention"),u=Object(s["C"])("DiscordMessage"),l=Object(s["C"])("DiscordMessages"),d=Object(s["C"])("InputBar");return Object(s["u"])(),Object(s["f"])(s["a"],null,[Object(s["g"])("div",zn,[Object(s["g"])("div",Vn,[Object(s["i"])(o,{header:"chat-room"})]),Object(s["g"])("div",{class:"messages",id:"messages",onScrollPassive:n[0]||(n[0]=function(){return c.loadMoreMess&&c.loadMoreMess.apply(c,arguments)})},[(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["A"])(t.messages,(function(e){return Object(s["u"])(),Object(s["d"])(l,{key:e.message_id},{default:Object(s["J"])((function(){return[Object(s["i"])(u,{author:e.username,avatar:e.avatar_url},{default:Object(s["J"])((function(){return[(Object(s["u"])(!0),Object(s["f"])(s["a"],null,Object(s["A"])(e.message,(function(e,n){return Object(s["u"])(),Object(s["f"])(s["a"],{key:n},[null!=e.match(a.r_user)?(Object(s["u"])(),Object(s["d"])(i,{key:0,highlight:!0},{default:Object(s["J"])((function(){return[Object(s["h"])(Object(s["E"])(function(){var n=e.match(a.r_user)[1],s=t.users.filter((function(e){return e.id==n}))[0];return s?s.username:"deleted user"}()),1)]})),_:2},1024)):null!=e.match(a.r_channel)?(Object(s["u"])(),Object(s["d"])(i,{key:1,type:"channel",highlight:!0,onClick:function(n){return c.to_channel(e.match(a.r_channel))}},{default:Object(s["J"])((function(){return[Object(s["h"])(Object(s["E"])(function(){var n=e.match(a.r_channel)[1],s=t.per[n];return s?s.channel_name:"personal channel"}()),1)]})),_:2},1032,["onClick"])):(Object(s["u"])(),Object(s["f"])("span",Wn,Object(s["E"])(e),1))],64)})),128))]})),_:2},1032,["author","avatar"])]})),_:2},1024)})),128))],32)]),Object(s["i"])(d,{emitSend:t.onSendMsg,per:t.per,channel_id:c.channel_id},null,8,["emitSend","per","channel_id"])],64)}t("b0c0");var Qn=t("c699"),Xn={class:"input"},Zn={class:"chat-area"},et=["placeholder"];function nt(e,n,t,r,a,c){return Object(s["u"])(),Object(s["f"])("div",Xn,[Object(s["g"])("div",Zn,[Object(s["g"])("div",{class:Object(s["o"])(1==c.allow_check?"chat-input":"chat-input disable-cursor block-blinking"),id:"chat-input",contenteditable:"true",onKeydown:n[0]||(n[0]=function(){return c.sendMessage&&c.sendMessage.apply(c,arguments)}),placeholder:c.allow_check?"Message #"+c.channel_name:"You don't have permission to chat in this channel"},null,42,et)])])}var tt={props:{emitSend:Function,per:Object,channel_id:String},data:function(){return{message:""}},methods:{sendMessage:function(e){if(this.allow_check){if("Enter"==e.key&&!e.shiftKey){e.preventDefault();var n=document.getElementById("chat-input"),t=n.innerText;t&&this.$socket.send(JSON.stringify({SendReq:{channel_id:this.channel_id,message:t}})),this.emitSend(t),n.innerHTML=""}}else e.preventDefault()}},computed:{allow_check:function(){return!!this.per&&(!!this.per[this.channel_id]&&this.per[this.channel_id].sendable)},channel_name:function(){return this.per&&this.per[this.channel_id]?this.per[this.channel_id].channel_name:"personal channel"}}};t("f71b");const st=u()(tt,[["render",nt],["__scopeId","data-v-fe9e24c8"]]);var rt=st,at={components:{DiscordMessage:Qn["b"],DiscordMessages:Qn["c"],DiscordMention:Qn["a"],NavBar:ie,InputBar:rt},props:{per:Object,messages:Array,hasMore:Object,onLoadMore:Function,onScroll:Function,emitChannelId:Function,users:Object,onSendMsg:Function},data:function(){var e={rules:"0",lobby:"1",0:"rules",1:"lobby"};return{cids:e,firstLoad:[],r_user:/<@(\d+)>/,r_channel:/<#(\d+)>/}},methods:{loadMoreMess:function(){var e=this.messages.length,n=document.getElementById("messages");this.hasMore.hasMore&&this.hasMore.lastFetchMoreDone&&n.scrollTop<=100?(console.log("get more",this.channel_id),this.onLoadMore(this.channel_id,e)):n.scrollTop<10&&(n.scrollTop=10),this.onScroll(this.channel_id,n.scrollTop,n.scrollHeight)},to_channel:function(e){var n=this,t=Object.keys(this.per).filter((function(e){return"personal channel"===n.per[e].channel_name}))[0],s=e[1]||"1",r=this.per[s]?s:t||"1",a="1"!==r&&"0"!=r?{name:"Game Room",params:{id:r}}:{name:"Chat",params:{name:this.cids[r]}};this.$router.push(a)}},mounted:function(){console.log("Chat Mounted"),this.emitChannelId(this.channel_id)},watch:{per:{handler:function(e){e[this.channel_id]||this.$router.push({name:"Chat",params:{name:"lobby"}})},deep:!0},messages:{handler:function(e,n){var t=this,s=document.getElementById("messages");setTimeout((function(){var r=void 0!==t.hasMore.scrollTop?t.hasMore.scrollHeight-t.hasMore.scrollTop-s.clientHeight:s.scrollHeight-s.scrollTop-s.clientHeight;0==e.length||t.firstLoad[t.channel_id]?r<=200?s.scrollTop=s.scrollHeight:e[e.length-1]!=n[n.length-1]&&(s.scrollTop=t.hasMore.scrollTop):(s.scrollTop=s.scrollHeight,t.firstLoad[t.channel_id]=!0),t.onScroll(t.channel_id,s.scrollTop,s.scrollHeight)}),0)},deep:!0},$route:function(e){var n=this.cids[e.params.name]||e.params.id||"0";this.emitChannelId(n)}},computed:{channel_id:function(){return this.cids[this.$route.params.name]||this.$route.params.id||"0"}}};t("d5e0");const ct=u()(at,[["render",Yn],["__scopeId","data-v-3a7e6b60"]]);var ot=ct,it=[{path:"/",name:"MainSite",component:gn,children:[{path:"rooms/:name",name:"Chat",component:ot},{path:"games/:id",name:"Game Room",component:ot}]},{path:"/login",name:"LogIn",component:Kn,props:{signup:!1}},{path:"/signup",name:"SignUp",component:Kn,props:{signup:!0}},{path:"/:pathMatch(.*)*",redirect:"/rooms/rules"}],ut=Object(f["a"])({history:Object(f["b"])("/werewolf-web-frontend/"),routes:it}),lt=ut,dt=t("ecee"),ft=t("c074"),bt=t("ad3d"),ht=t("df85"),pt=t("a20e"),gt=t.n(pt),Ot=(t("2903"),t("ed18")),mt=t.n(Ot);mt.a.config();var jt=ln.getCookie("token");dt["c"].add(ft["a"]),Object(s["c"])(d).use(lt).use(r["a"]).use(ht["a"]).use(Qn["d"]).use(gt.a,"wss://werewolf-web-services.herokuapp.com/ws?token=".concat(jt),{reconnection:!0,reconnectionAttempts:100,reconnectionDelay:300,connectManually:!0}).component("fa",bt["a"]).mount("#app")},"5f83":function(e,n,t){"use strict";t("223e")},"656b":function(e,n,t){},"65a1":function(e,n,t){},"6c12":function(e,n,t){"use strict";t("7135")},"6e79":function(e,n,t){},7135:function(e,n,t){},"777f":function(e,n,t){"use strict";t("65a1")},8169:function(e,n,t){"use strict";t("e416")},"81b4":function(e,n,t){},"86ad":function(e,n,t){},ab9b:function(e,n,t){"use strict";t("656b")},c0bb:function(e,n,t){"use strict";t("86ad")},cb1c:function(e,n,t){},d48d:function(e,n,t){"use strict";t("5454")},d5e0:function(e,n,t){"use strict";t("cb1c")},e199:function(e,n,t){},e416:function(e,n,t){},f71b:function(e,n,t){"use strict";t("e199")},fdc7:function(e,n,t){"use strict";t("6e79")}});
//# sourceMappingURL=app.1a28b4a7.js.map